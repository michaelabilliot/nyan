<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- MODIFIED: Added maximum-scale and user-scalable=no for a more app-like feel on mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nyan Cat Clicker Adventure</title>
    <!-- ADDED: Link to favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <div id="game-container">
        <!-- Main Game Area -->
        <div id="main-area">
            <div id="stats-display">
                <h1 id="coin-count">0</h1>
                <p><span id="cps-count">0.0</span> Nyan Coins per second</p>
            </div>
            <div id="rainbow-container">
                <canvas id="trail-canvas"></canvas>
            </div>
            <div id="boost-container"></div>
            <div id="nyan-cat-container">
                <img src="assets/cats/nyan-cat.png" id="nyan-cat-image" alt="Clickable Nyan Cat" draggable="false">
            </div>
        </div>

		<div id="slide-out-container">
			<div id="settings-tab" class="slide-tab">
				<img src="assets/icons/cog.png" alt="Settings">
			</div>
			<div id="achievements-tab" class="slide-tab">
				<img src="assets/icons/trophy.png" alt="Achievements">
			</div>
			<div id="stats-tab" class="slide-tab">
				<img src="assets/icons/stats.png" alt="Statistics">
			</div>
            <div id="easter-eggs-tab" class="slide-tab" style="display: none;">
				<img src="assets/icons/egg.png" alt="Easter Eggs">
			</div>
			<div id="nyan-tree-tab" class="slide-tab">
				<img src="assets/icons/tree.png" alt="Nyan Tree">
			</div>
		</div>

        <!-- Right Side Panel -->
        <div id="right-panel">
            <div id="right-panel-header">
                <div id="controls-header">
                    <button id="shop-btn" class="btn">Shop</button>
                    <button id="rebirth-btn" class="btn">Rebirth</button>
                    <div id="multiplier-container">
                        <span>Buy:</span>
                        <button id="multiplier-btn">1x</button>
                    </div>
                </div>
                <div id="rebirth-info-container">
                    <div id="rebirth-info-main">Rebirths: <span id="rebirth-count">0</span> | Rebirth Points: <span id="rebirth-points-display">0</span></div>
                    <div id="rebirth-info-boosts">
                        <span>CPS Boost: <span id="cps-boost-display">0.00%</span></span>
                        <span>NPC Boost: <span id="npc-boost-display">0.00%</span></span>
                    </div>
                </div>
            </div>
            <div id="upgrades-list"></div>
        </div>
    </div>
    
    <!-- Fullscreen Nyan Tree Screen -->
    <div id="nyan-tree-screen" class="fullscreen-overlay">
        <div id="nyan-tree-header">
            <div id="nyan-tree-points">Rebirth Points: <span id="nyan-tree-points-display">0</span></div>
        </div>
        <div id="nyan-tree-canvas">
            <div id="nyan-tree-wrapper">
                <!-- Tree nodes will be generated here by JS -->
            </div>
        </div>
        <div id="nyan-tree-footer">
            <div id="nyan-tree-details-panel">
                <div id="details-content">Select a node to see details.</div>
                <button id="nyan-tree-buy-btn" class="btn" style="display: none;">Buy</button>
            </div>
            <button id="nyan-tree-reset-view-btn" class="btn">Reset View</button>
            <button id="return-to-game-btn" class="btn">Return to Game</button>
        </div>
    </div>

	<div id="confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal-x">×</span>
            <h2 id="confirm-modal-title"></h2>
            <p id="confirm-modal-message"></p>
            <div class="modal-buttons">
                <button id="confirm-modal-yes" class="btn">Yes</button>
                <button id="confirm-modal-no" class="btn">No</button>
                <button id="confirm-modal-ok" class="btn" style="display: none;">OK</button>
            </div>
        </div>
    </div>
    <div id="shop-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal-x">×</span>
            <h2>Skins & Boosts</h2>
            <div id="skin-carousel-viewport">
                <div id="skin-carousel-track">
                    <!-- Skin items will be generated here by JS -->
                </div>
                <div id="skin-nav-left" class="skin-carousel-nav">‹</div>
                <div id="skin-nav-right" class="skin-carousel-nav">›</div>
            </div>
             <div id="skin-details-panel">
                <!-- Skin details will be generated here by JS -->
            </div>
            <div id="shop-actions">
                <button id="shop-buy-btn" class="btn">Equip</button>
            </div>
        </div>
    </div>

    <div id="achievements-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal-x">×</span>
            <h2>Achievements</h2>
            <div id="achievements-content"></div>
        </div>
    </div>

    <div id="easter-eggs-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal-x">×</span>
            <h2>Secrets Found</h2>
            <div id="easter-eggs-content">
                <!-- Easter eggs will be generated here by JS -->
            </div>
        </div>
    </div>

    <div id="stats-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal-x">×</span>
            <h2>Statistics</h2>
            <div id="stats-content">
                <!-- Stats will be generated here by JS -->
            </div>
        </div>
    </div>

    <!-- MODIFIED: Settings Modal has been completely restructured for responsiveness -->
    <div id="settings-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal-x">×</span>
            <h2>Settings</h2>
            <div id="settings-grid">
                <!-- Desktop Navigation Column -->
                <nav id="settings-nav">
                    <button class="nav-btn active" data-for-panel="audio">Audio</button>
                    <button class="nav-btn" data-for-panel="display">Display</button>
                    <button class="nav-btn" data-for-panel="data">Data</button>
                    <button class="nav-btn" data-for-panel="dev">Developer</button>
                </nav>

                <!-- Settings Panels -->
                <div id="settings-panels">
                    <!-- Audio Panel -->
                    <div class="settings-panel active" id="settings-panel-audio" data-panel="audio">
                        <h3 class="panel-header">Audio</h3>
                        <div class="panel-content">
                            <div class="setting-item">
                                <label for="music-volume-slider">Music Volume</label>
                                <input type="range" id="music-volume-slider" min="0" max="100" value="50">
                                <input type="checkbox" id="music-toggle" checked>
                            </div>
                            <div class="setting-item">
                                <label for="sfx-volume-slider">SFX Volume</label>
                                <input type="range" id="sfx-volume-slider" min="0" max="100" value="80">
                                <input type="checkbox" id="sfx-toggle" checked>
                            </div>
                            <div class="setting-item">
                                <label for="global-mute-toggle">Mute All Audio</label>
                                <input type="checkbox" id="global-mute-toggle">
                            </div>
                        </div>
                    </div>

                    <!-- Display Panel -->
                    <div class="settings-panel" id="settings-panel-display" data-panel="display">
                        <h3 class="panel-header">Display</h3>
                        <div class="panel-content">
                            <div class="setting-item">
                                <label for="dark-mode-toggle">Dark Mode</label>
                                <input type="checkbox" id="dark-mode-toggle">
                            </div>
                            <div class="setting-item">
                                <label for="theme-selector">UI Theme</label>
                                <select id="theme-selector" class="btn">
                                    <option value="default">Default</option>
                                    <option value="vaporwave">Vaporwave</option>
                                    <option value="matrix">Matrix</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label for="notation-selector">Number Notation</label>
                                <select id="notation-selector" class="btn">
                                    <option value="standard">Standard (M, B, T)</option>
                                    <option value="scientific">Scientific (e+6)</option>
                                    <option value="engineering">Engineering (e+6)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Data Panel -->
                     <div class="settings-panel" id="settings-panel-data" data-panel="data">
                        <h3 class="panel-header">Data</h3>
                         <div class="panel-content">
                             <div class="setting-item-group">
                                 <button id="manual-save-btn" class="btn">Save Game</button>
                                 <button id="export-save-btn" class="btn">Export Save</button>
                                 <button id="import-save-btn" class="btn">Import Save</button>
                             </div>
                             <div class="setting-item-group">
                                 <button id="reset-game-btn" class="btn btn-danger">Reset All Progress</button>
                             </div>
                         </div>
                    </div>

                    <!-- Developer Panel -->
                    <div class="settings-panel" id="settings-panel-dev" data-panel="dev">
                        <h3 class="panel-header">Developer</h3>
                        <div class="panel-content">
                            <div class="setting-item">
                                <label for="dev-mode-toggle">Developer Mode</label>
                                <input type="checkbox" id="dev-mode-toggle">
                            </div>
                            <div id="dev-mode-cheats" style="display: none;">
                                <button id="add-coins-cheat" class="btn">Add 1M Coins</button>
                                <button id="add-1b-coins-cheat" class="btn">Add 1B Coins</button>
                                <button id="add-1t-coins-cheat" class="btn">Add 1T Coins</button>
                                <button id="add-1q-coins-cheat" class="btn">Add 1Q Coins</button>
                                <button id="add-rebirth-points-cheat" class="btn">Add 10 RP</button>
                                <button id="get-249-upgrades-cheat" class="btn">Get 249 of Each</button>
                                <button id="unlock-all-achievements-cheat" class="btn">Unlock Achievements</button>
                                <button id="max-nyan-tree-cheat" class="btn">Max Nyan Tree</button>
                                <button id="add-rebirths-cheat" class="btn">Add 5 Rebirths</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="achievement-toast">
        <div id="achievement-icon">🏆</div>
        <div id="achievement-text">
            <div id="achievement-title">Achievement Unlocked!</div>
            <div id="achievement-desc">You did something amazing!</div>
        </div>
    </div>

    <div id="transition-overlay"></div>
    <div id="upgrade-boost-tooltip" class="tooltip"></div>
    <!-- FIXED: Corrected the path to main.js -->
    <script type="module" src="./js/main.js"></script>
</body>
</html>